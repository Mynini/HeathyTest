<!DOCTYPE html>
<html ng-app="myApp">
    <head>
        <meta charset="UTF-8">
        <title>ui-view</title>
        <script src="http://lib.baomitu.com/angular.js/1.6.4/angular.min.js"></script>
        <script src="http://lib.baomitu.com/angular-ui-router/1.0.3/angular-ui-router.min.js"></script>
        <style type="text/css">
        	*{margin:0;padding:0;list-style: none;}
        	.header{background:red;padding:30px;}
        	.header h3{color:#fff;}
        	.main{padding:30px;border:1px solid red;margin:50px 0 0;}
        	.nav{clear:both;overflow: hidden;margin:20px -20px 0;}
        	.nav li a{float:left;margin:0 20px;color:#fff;text-decoration: none;}
        	
        	.main_tit{margin:30px 0;}
        	.main_view{min-height:100px;border:1px solid red;}
        	.view{padding:20px 0;border:1px solid blue;min-height: 100px;}
        	.view_tit{margin:50px 0 10px;}
        </style>
    </head>
    <body ng-controller="myCtrl">
        
        
        <div class="header">
        	<h3>当前页面index主页面  下面公用导航</h3>
	        <ul class="nav"> 
	        	<li><a ui-sref="homestate.home1({h1:'home-home1'})">跳到home1页面</a></li>
	        	<li><a ui-sref="chatstate({data:'home-chat'})">跳到chat页面</a></li>
	        	<li><a ui-sref="ourstate">跳到our页面</a></li>
	        	<li><a ui-sref="ourstate">跳到our页面</a></li>
	        </ul>
        </div>
        
        <div class="main">
        	<h3 class='main_tit'>这是index页主内容区域</h3>
        	
        	<h4 class="view_tit">默认视图显示区域</h3>
        	<div class="main_view" ui-view ></div>  <!--默认视图区域-->
        	
        	<button ng-click="goour()">index下的按钮跳转到our</button>
        	
	        <h4 class="view_tit">v1状态(名字为v1的视图显示区域 ):</h3>
	        <div ui-view="v1" class="view"></div> <!--名字为v1的视图区域 -->
	        
	        <h4 class="view_tit">v2状态(名字为v1的视图显示区域 ):</h4>
	        <div ui-view="v2" class="view"></div> <!--名字为v2的视图区域 -->
        </div>
    </body>

    
    
    <script type="text/javascript">
        var app = angular.module("myApp",["ui.router"]);
        app.config(function($stateProvider, $urlRouterProvider){
            $urlRouterProvider.when('',"home");
            $stateProvider
            .state("home",{
            	url:"/home_1",
            	templateUrl:"1.html"
            })
            .state('homestate', {
                url: "/home",//控制地址栏跳转的地址
                views:{
                    //"","v1","v2"是ui-view的名字
                    "":{
                        controller:"homeCtrl",
                        templateUrl: 'home.html'
                    },
                    "v1":{
                        template:"<p>homestate状态</p>"
                    }
                }
            })
            .state("homestate.home1",{
                url:"/home1/?h1?id",
                //params:{h1:null,id:null},//写法同上;
                views:{
                    "":{
                        controller:function($scope,$stateParams){
                            console.log($stateParams.h1);//ui-sref传参
                            console.log($stateParams.id);//state.go传参
                        },
                        templateUrl: 'home1.html'
                    },
                //由于home1是home的子页面,所以v1和v2页面设置是无效的,因为v1和v2不在home页面里而是在index页面
                }
            })
            .state("homestate.home2",{
                url:"/home2",
                views:{
                    "":{
                        controller:function($scope){
//                            console.log($stateParams.h1);
                        },
                        templateUrl: '1.html'
                    },
                }
            })
            .state("chatstate",{
                url:"/chat",
                params:{data:null},
                views:{
                    "":{
                        controller:function($scope,$stateParams){
                            console.log($stateParams.data);
                        },
                        templateUrl: 'chat.html'
                    },
                    "v1":{
                        template:"<p>chatstate状态</p>"
                    }
                }
            })
            .state("ourstate",{
                url:"/our",
                params:{"id":null},//或者url:"/our:id"
                views:{
                    "":{
                        controller:function($scope,$stateParams){
                            console.log($stateParams.id);
                        },
                        templateUrl: 'our.html'
                    },
                    "v2":{
                        template:"<p>ourstate状态</p>"
                    }
                }
            })
            $urlRouterProvider.otherwise('/home');
        });
        
        app.controller("myCtrl",function($scope,$state){
            $scope.goour = function (){
                $state.go("ourstate",{id:"index-our"});
            }
        });
        app.controller("homeCtrl",function($scope,$state){
            $scope.goour = function (){
                $state.go("ourstate",{id:"home-our"});
            };
            $scope.gohome1 = function(){
                $state.go("homestate.home1",{id:"home-home1"});
            };
            $scope.gohome2 = function(){
                $state.go("homestate.home2",{id:"home-home2"});
            }
        });
        //注释：多视图views可以实现多个ui-view，根据地址或状态的不同使这几个ui-view分别显示不同内容(也可以不显示)，而且这几个状态是同级关系
        //而嵌套视图的子视图是在父视图下的，父视图下应该有ui-view
    </script>
</html>