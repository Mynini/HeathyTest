<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
    <title>互评-寒武纪智能月度绩效考核管理系统</title>
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="This is my page">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <script>
    ! function(e) {
        var c = { nonSecure: "8123", secure: "8124" },
            t = { nonSecure: "http://", secure: "https://" },
            r = { nonSecure: "127.0.0.1", secure: "gapdebug.local.genuitec.com" },
            n = "https:" === window.location.protocol ? "secure" : "nonSecure";
        script = e.createElement("script"), script.type = "text/javascript", script.async = !0, script.src = t[n] + r[n] + ":" + c[n] + "/codelive-assets/bundle.js", e.getElementsByTagName("head")[0].appendChild(script)
    }(document);
    </script>
</head>

<body>
    <div align="center" data-genuitec-lp-enabled="false" data-genuitec-file-id="wc1-4" data-genuitec-path="/HRI-log/WebRoot/judge.jsp">
        <a href="index.jsp">回到主页</a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 李玉兰，欢迎您！ <a href="profile.jsp">个人资料</a>&nbsp;&nbsp;&nbsp;<a href="logout.jsp">退出登陆 </a>
        <br> <a href="viewall.jsp">查看本月互评即时结果</a>
        <br>
        <br>
        <form method="post" onsubmit="return checkSubmit()" action="judgejudge.jsp">
            <table cellpadding="0" cellspacing="0" width="825px" bgColor="#E6EFEC" style="font-family:等线;color:323232;table-layout:fixed;">
                <tr bgColor="#4E92AF">
                    <th align="center" width="65px">姓名</th>
                    <th align="center" style="word-wrap:break-word;">主要工作及成果</th>
                    <th align="center" width="75px">工作成果</th>
                    <th align="center" width="75px">工作态度</th>
                    <th align="center" width="75px">工作质量</th>
                    <th align="center" width="75px">团队合作</th>
                </tr>
                <tr bgColor="#f0f0f0">
                    <td>&nbsp;赵发明</td>
                    <td></td>
                    <td align="center">
                        <select name="A-7" class="select1">
                            <option value="" style="display:none" selected="selected">请选择</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                        </select>
                    </td>
                    <td align="center">
                        <select name="B-7" class="select2">
                            <option value="" style="display:none" selected="selected">请选择</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                        </select>
                    </td>
                    <td align="center">
                        <select name="C-7" class="select3">
                            <option value="" style="display:none" selected="selected">请选择</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                        </select>
                    </td>
                    <td align="center">
                        <select name="D-7" class="select4">
                            <option value="" style="display:none" selected="selected">请选择</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                        </select>
                    </td>
                </tr>
                <td>&nbsp;徐宗亮</td>
                <td></td>
                <td align="center">
                    <select name="A-10" class="select1">
                        <option value="" style="display:none" selected="selected">请选择</option>
                        <option value="A">A</option>
                        <option value="B">B</option>
                        <option value="C">C</option>
                        <option value="D">D</option>
                    </select>
                </td>
                <td align="center">
                    <select name="B-10" class="select2">
                        <option value="" style="display:none" selected="selected">请选择</option>
                        <option value="A">A</option>
                        <option value="B">B</option>
                        <option value="C">C</option>
                        <option value="D">D</option>
                    </select>
                </td>
                <td align="center">
                    <select name="C-10" class="select3">
                        <option value="" style="display:none" selected="selected">请选择</option>
                        <option value="A">A</option>
                        <option value="B">B</option>
                        <option value="C">C</option>
                        <option value="D">D</option>
                    </select>
                </td>
                <td align="center">
                    <select name="D-10" class="select4">
                        <option value="" style="display:none" selected="selected">请选择</option>
                        <option value="A">A</option>
                        <option value="B">B</option>
                        <option value="C">C</option>
                        <option value="D">D</option>
                    </select>
                </td>
                </tr>
            </table>
            <br>
            <input type="submit" value="提交">
            <br>
        </form>
    </div>
    <script>
    function Performance() {

        this.defaults = {
            selectArr: ["select1"]
        }
    }

    Performance.prototype.init = function() {
        this.ManageResult();
    }

    Performance.prototype.ManageResult = function() {
        this.defaults.selectArr.forEach(function(item, i) {
            var a = new CaculRatio(item, i);
        })

    }

    // caculate the number of this current column A,B,C,D 
    function CaculRatio(clas, idx) {
        this.per = {
            A: 0.15,
            B: 0.25,
            C: 0.5,
            D: 0.1
        }

        this.init(clas);
        this.columnIdx = idx;
    }



    //存select集合
    CaculRatio.prototype.selectArr = [];

    //存select ABCD选值集合
    CaculRatio.prototype.selectOptionArr = [];

    //存计算所得ABCD所能存在的最大个数
    CaculRatio.prototype.ABCDMaxNum ={};

    //初始化
    CaculRatio.prototype.init = function(clas) {
        this.getDom(clas);
        this.getLen();
        this.caculateMaxOption();
        this.selectFn();
    }



    //获取select集合
    CaculRatio.prototype.getDom = function(clas) {
        var arr = document.querySelectorAll("." + clas);
        for (var i = 0; i < arr.length; i++) {
            this.selectArr.push(arr[i]);
        }
    }

    //获取集合length
    CaculRatio.prototype.getLen = function() {
        this.len = this.selectArr.length;
    }

    //选种函数开始
    CaculRatio.prototype.selectFn = function() {
        var _this = this;
        this.selectArr.forEach(function(item, i) {
            _this.initSelectOptionArr(item, i, _this);

            item.Idx = i;
            item.preVal = item.value;
            item.onchange = function() {
                checkIfMaxPer(this, this.Idx, this.preVal);

                function checkIfMaxPer(select, Idx, preVal, ) {

                    for (var option in _this.per) {
                        if (select.value == option) {
                            checkOptionNum(select, Idx, preVal, option, _this.per[option]);
                        }
                    }
                    preVal = select.value;
                }

                function checkOptionNum(select, Idx, preVal, option, maxNum) {

                    // var n = 0;

                    // for (var j in _this.selectOptionArr) {
                    //     checkArr[j][option] == 1 ? n++ : "";
                    // }

                    // if (n >= maxNum || maxNum == 0) {
                    //     alert(option + "选项个数已经达到上线");
                    // } else {

                    // }

                }


            }
        })

    }

    //初始化SelectOptionArr集合
    CaculRatio.prototype.initSelectOptionArr = function(select, i, _this) {
        _this.selectOptionArr[i] = {};
        for (var j in _this.per) {s
            select.value == j ? _this.selectOptionArr[i][j] = 1 : _this.selectOptionArr[i][j] = 0;
        }
    }


    //返回ABCD所能选的最大个数
    CaculRatio.prototype.caculateMaxOption=function(){
        var num =/^\d+/;
        var float=/\.[0-9]+/;
        var arr=[]; //存整数小娄分离

        // 依具this.per初始化 arr
        // this.ABCDMaxNum 存最后得到的ABCD所占最大个数值
        var n=0;
        for(var i in this.per){
            arr[n]={};
            this.ABCDMaxNum[i]=(this.per[i]*this.len).toString();
            arr[n].Int=num.exec(this.ABCDMaxNum[i])[0];
            arr[n].flo=Number(this.ABCDMaxNum[i])-parseInt(arr[n].Int);
            n++;
        }

        







    }




    var a = new Performance();
    a.init();
    </script>
</body>

</html>